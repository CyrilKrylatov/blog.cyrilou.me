<!doctype html>
<html lang="fr">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Navigation avec le clavier pour bonjourdubstep.fr</title>
		<meta name="description" content="Mon p&#39;tit blog.">
        <link rel="icon" href="/favicon-96x96.png" sizes="32x32">
        <link rel="apple-touch-icon" href="/apple-touch-icon.png">
		<link rel="alternate" href="feed/feed.xml" type="application/atom+xml" title="Cyrilou, en toute intimité">

		<meta name="generator" content="Eleventy v3.0.0">
		
		<style>@charset "utf-8";

/* ----------------------------------------------------------
   Common
   ------------------------------------------------------- */

html {
 box-sizing: border-box;
 height: 100%;
}

*,
*:after,
*:before {
 box-sizing: inherit;
}

body {
 margin: 0;
 padding: 3rem 2rem;
 min-height: 100%;
 border-top: 3px #1d1d1d solid;
 font-family: system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue","Noto Sans","Liberation Sans",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";
 font-size: 1.2rem;
 line-height: 1.5;
 color: #1b1b1b;
 background: #fff;
}

img {
 display: block;
 height: auto;
 margin: 0 auto;
 max-width: 100%;
}

main {
 margin: 0 auto;
 max-width: 1280px;
}

main > *:not(picture) {
 display: block;
 margin-right: auto;
 margin-left: auto;
 max-width: 560px;
}

time {
 margin-top: .8rem;
 margin-bottom: .8rem;
 font-size: .95rem;
 font-style: italic;
}

/* ----------------------------------------------------------
   Header
   ------------------------------------------------------- */

header {
 margin: 0 0 40px;
 font-size: 0;
}

header a:hover {
 opacity: .8;
}

/* ----------------------------------------------------------
   Navigation
   ------------------------------------------------------- */

.links-nextprev {
 margin-bottom: 0;
 padding-left: 0;
 list-style: none;
}

.links-nextprev li + li {
 margin-top: .4rem;
}

/* ----------------------------------------------------------
   Footer
   ------------------------------------------------------- */

footer {
 margin: 0 auto;
 padding: 2rem 0;
 max-width: 560px;
 font-size: .8rem;
 font-style: italic;
}</style>

	</head>
	<body>
		<header>
			<a href="/" aria-label="Cyrilou, en toute intimité">
                <picture><source type="image/avif" srcset="/img/EWYaswpLHw-164.avif 164w"><source type="image/webp" srcset="/img/EWYaswpLHw-164.webp 164w"><img loading="lazy" decoding="async" src="/img/EWYaswpLHw-164.png" width="164" height="164" alt=""></picture>
            </a>
		</header>

		<main>
			<h1 id="navigation-avec-le-clavier-pour-bonjourdubstep-fr">Navigation avec le clavier pour bonjourdubstep.fr</h1>

<time datetime="2012-01-07">07 January 2012</time>

<p>Une petite feature qui me tenait à coeur pour <a href="http://bonjourdubstep.fr">bonjourdubstep</a> : la navigation par clavier. Ainsi, nous pouvons utiliser la touche « r » pour aller sur une page choisie aléatoirement; « j » pour la page suivante; « k » pour la page suivante et « h » pour revenir sur la home.</p>
<p>La contrainte ici, c’est que cela ne fonctionnera qu’uniquement sur une url type <strong>/page/N</strong>, vu que les URL avec le titre du morceau à l’intérieur ne fonctionnent pas étant donné qu’elles ne récupèrent pas l’ID de la page comme le fait /page/N. Merci tumblr.</p>
<p>Bref, pour ceux que ça pourrait intéresser et faire genre j’sais utiliser la librairie jQuery, voici le code :</p>
<div class="wp_syntax">
  <table>
    <tr>
      <td class="line_numbers">
        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
</pre>
      </td>
<p><td class="code">
<pre class="javascript" style="font-family:monospace;">jQuery<span style="color: #009900;">(</span><span style="color: #3366CC;">&quot;body&quot;</span><span style="color: #009900;">)</span>.<span style="color: #660066;">keydown</span><span style="color: #009900;">(</span><span style="color: #000066; font-weight: bold;">function</span><span style="color: #009900;">(</span>event<span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
<span style="color: #006600; font-style: italic;">// Si le keycode de l'event (= touche pressée (keydown)) est 82 (correspond à la touche &quot;r&quot;)</span>
<span style="color: #000066; font-weight: bold;">if</span> <span style="color: #009900;">(</span>event.<span style="color: #660066;">keyCode</span> <span style="color: #339933;">==</span> <span style="color: #3366CC;">'82'</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
<span style="color: #006600; font-style: italic;">// On récupère les pages total avec le tag qui va bien de Tumblr</span>
<span style="color: #000066; font-weight: bold;">var</span> totalpages <span style="color: #339933;">=</span> <span style="color: #009900;">{</span>TotalPages<span style="color: #009900;">}</span><span style="color: #339933;">;</span>
<span style="color: #000066; font-weight: bold;">if</span> <span style="color: #009900;">(</span>totalpages <span style="color: #339933;">&gt;</span> <span style="color: #CC0000;">1</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
<span style="color: #006600; font-style: italic;">// Ensuite, le calcul qui va bien pour sortir un numéro entre {1;totalpages}</span>
<span style="color: #000066; font-weight: bold;">var</span> randPage <span style="color: #339933;">=</span> <span style="">Math</span>.<span style="color: #660066;">ceil</span><span style="color: #009900;">(</span><span style="">Math</span>.<span style="color: #660066;">random</span><span style="color: #009900;">(</span><span style="color: #009900;">)</span> <span style="color: #339933;">*</span> totalpages<span style="color: #009900;">)</span><span style="color: #339933;">;</span>
<span style="color: #006600; font-style: italic;">// On redirige la fenêtre vers /page/randPage</span>
window.<span style="color: #660066;">location</span>.<span style="color: #660066;">href</span><span style="color: #339933;">=</span><span style="color: #3366CC;">'/page/'</span><span style="color: #339933;">+</span>randPage
<span style="color: #009900;">}</span>
<span style="color: #009900;">}</span>
 
<span style="color: #006600; font-style: italic;">// Si le keycode est celui de la touche &quot;h&quot;</span>
<span style="color: #000066; font-weight: bold;">if</span> <span style="color: #009900;">(</span>event.<span style="color: #660066;">keyCode</span> <span style="color: #339933;">==</span> <span style="color: #3366CC;">'72'</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
<span style="color: #006600; font-style: italic;">// On redirige à la racine</span>
window.<span style="color: #660066;">location</span>.<span style="color: #660066;">href</span><span style="color: #339933;">=</span><span style="color: #3366CC;">'/'</span>
<span style="color: #009900;">}</span>
<span style="color: #006600; font-style: italic;">// Si le keycode est celui de la touche &quot;j&quot;</span>
<span style="color: #000066; font-weight: bold;">if</span> <span style="color: #009900;">(</span>event.<span style="color: #660066;">keyCode</span> <span style="color: #339933;">==</span> <span style="color: #3366CC;">'74'</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
<span style="color: #006600; font-style: italic;">// On var l'id de la page courante</span>
<span style="color: #000066; font-weight: bold;">var</span> currentpage <span style="color: #339933;">=</span> <span style="color: #009900;">{</span>CurrentPage<span style="color: #009900;">}</span><span style="color: #339933;">;</span>
<span style="color: #006600; font-style: italic;">// Si elle est suppérieur à 1 (pour ne pas aller à /page/0/ et inférieur)</span>
<span style="color: #000066; font-weight: bold;">if</span> <span style="color: #009900;">(</span>currentpage <span style="color: #339933;">&gt;</span> <span style="color: #CC0000;">1</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
<span style="color: #006600; font-style: italic;">// On va à currentpage-1</span>
<span style="color: #000066; font-weight: bold;">var</span> prevpage <span style="color: #339933;">=</span> currentpage <span style="color: #339933;">-</span><span style="color: #CC0000;">1</span><span style="color: #339933;">;</span>
window.<span style="color: #660066;">location</span>.<span style="color: #660066;">href</span><span style="color: #339933;">=</span><span style="color: #3366CC;">'/page/'</span><span style="color: #339933;">+</span>prevpage
<span style="color: #009900;">}</span>
<span style="color: #009900;">}</span>
 
<span style="color: #006600; font-style: italic;">// Même principe que pour la touche &quot;j&quot;, sauf que là, c'est &quot;k&quot;</span>
<span style="color: #000066; font-weight: bold;">if</span> <span style="color: #009900;">(</span>event.<span style="color: #660066;">keyCode</span> <span style="color: #339933;">==</span> <span style="color: #3366CC;">'75'</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
<span style="color: #000066; font-weight: bold;">var</span> currentpage <span style="color: #339933;">=</span> <span style="color: #009900;">{</span>CurrentPage<span style="color: #009900;">}</span><span style="color: #339933;">;</span>
<span style="color: #000066; font-weight: bold;">if</span> <span style="color: #009900;">(</span>currentpage <span style="color: #339933;">&gt;</span> <span style="color: #009900;">{</span>TotalPages<span style="color: #009900;">}</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
<span style="color: #000066; font-weight: bold;">var</span> nextpage <span style="color: #339933;">=</span> currentpage <span style="color: #339933;">+</span><span style="color: #CC0000;">1</span><span style="color: #339933;">;</span>
window.<span style="color: #660066;">location</span>.<span style="color: #660066;">href</span><span style="color: #339933;">=</span><span style="color: #3366CC;">'/page/'</span><span style="color: #339933;">+</span>nextpage
<span style="color: #009900;">}</span>
<span style="color: #009900;">}</span>
<span style="color: #009900;">}</span><span style="color: #009900;">)</span><span style="color: #339933;">;</span></pre>
</td>
</p></tr><p></p>
  </table>
</div>
<p>Ensuite, un coup de <a href="http://www.minifyjs.com/javascript-compressor/">JavaScript Compressor</a> pour gagner en performance sur la page et zou.</p>
<p>Egalement l’occasion pour moi de tester <a href="http://www.sublimetext.com/2">Sublime Text v2</a>, chaudement recommandé par <a href="http://Twitter.com/_kud">@_kud</a>, qui n’a pas l’air trop vilain.</p>
<p style="text-align:center;">
  <picture><source type="image/avif" srcset="/blog/2012-01-07-navigation-avec-le-clavier-pour-bonjourdubstep-fr/e9r_WBXzuf-638.avif 638w"><source type="image/webp" srcset="/blog/2012-01-07-navigation-avec-le-clavier-pour-bonjourdubstep-fr/e9r_WBXzuf-638.webp 638w"><img loading="lazy" decoding="async" src="/blog/2012-01-07-navigation-avec-le-clavier-pour-bonjourdubstep-fr/e9r_WBXzuf-638.png" alt="" title="Capture d’écran 2012-01-07 à 15.25.24" width="638" height="804" class="alignnone size-full wp-image-280"></picture>
</p>
<p>Allez, kiss !</p>

<ul class="links-nextprev"><li class="links-nextprev-prev">← <a href="/blog/2011-12-27-on-dirait-presque-des-montagnes/">&amp;laquo;&amp;nbsp;On dirait presque des montagnes&amp;nbsp;&amp;raquo;</a></li><li class="links-nextprev-next"><a href="/blog/2012-03-04-dat-30-years/">DAT 30 YEARS.</a> →</li>
</ul>

		</main>

		<footer>
			<p>
                <em>Built with <a href="https://www.11ty.dev/">Eleventy v3.0.0</a></em>.
                Contact me on <a href="https://github.com/CyrilKrylatov/">GitHub</a>.
            </p>
		</footer>
		
	</body>
</html>
